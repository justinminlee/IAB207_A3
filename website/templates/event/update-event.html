{% extends "base.html" %}

{% block content %}

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sportify - Update an Event</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

  <!-- External CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style/main.css') }}">
</head>

<body>
  <!-- Main Content Section -->
  {% if current_user.is_authenticated and current_user.id == event.user_id and event.status != 'cancelled' %}
  <main class="container my-5">
    <h1 class="text-center mb-4">Update an Event</h1>

    <form method="POST">
      {{ form.hidden_tag()}}

    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="card shadow">
          <div class="card-body">
            {% if event %}
              <form method="POST" action="{{ url_for('event.update', id=event.id) }}" class="needs-validation" novalidate>
                <div class="row">
                  <!-- Left side of form -->
                  <div class="col-md-6">
                    <div class="mb-3">

                      <!-- Event Name -->
                      <label>{{ form.name.label }}</label>
                      {{ form.name(class="form-control", placeholder = "Enter Event Name") }}
                      <div class="invalid-feedback">Please provide an event name.</div>
                    </div>

                    <div class="mb-3">
                      <label>{{ form.description.label }}</label>
                      {{ form.description(class="form-control", placeholder = "Enter Description") }}
                      <div class="invalid-feedback">Please provide an event description.</div>
                    </div>

                    <div class="mb-3">
                      <label>{{ form.image.label }}</label>
                      {{ form.image(class="form-control", placeholder = "Put Event Image") }}
                      <div class="invalid-feedback">Please provide an event description.</div>
                    </div>

                    <!-- Cateogory -->  
                    <div class="mb-3">
                      <label>{{ form.category.label }}</label>
                      {{ form.category(class="form-control", placeholder = "Enter category") }}
                      <div class="invalid-feedback">Please select an event category.</div>
                    </div>

                    <div class="mb-3">
                      <label>{{ form.price.label }}</label>
                      {{ form.price(class="form-control", placeholder = "Enter Price($)") }}
                      <div class="invalid-feedback">Please Enter the Price.</div>
                    </div>

                    <div class="mb-3">
                      <label>{{ form.capacity.label }}</label>
                      {{ form.capacity(class="form-control", placeholder = "Provide Capacity") }}
                      <div class="invalid-feedback">Please provide the event capacity.</div>
                    </div>
                  </div>

                  <!-- Right side of form -->
                  <div class="col-md-6">
                    <div class="mb-3">
                      <label>{{ form.location.label }}</label>
                      {{ form.location(class="form-control", placeholder = "Enter Location") }}
                      <div class="invalid-feedback">Please provide an event location.</div>
                    </div>

                    <div class="mb-3">
                      <label>{{ form.datetime.label }}</label>
                      {{ form.datetime(class="form-control", placeholder = "Enter Date( %Y-%m-%dT%H:%M )") }}
                      <div class="invalid-feedback">Please provide a valid date and time.</div>
                    </div>
                  </div>
                </div>
                <div class = "text-center mt-4">
                  {{ form.submit(class="btn btn-primary") }}
                </div>
              </form>
            {% else %}
              <p class="text-center">Event not found or you're not authorized to edit this event.</p>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </main>
  {% endif %}

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

{% endblock %}